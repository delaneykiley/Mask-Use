<!DOCTYPE html>

<script src='https://d3js.org/d3.v5.min.js'></script>

<body onload='init()' style="background-color:lightgray;">

<h1>Airbnb Listings Data Visualization</h1>

<p>This data visualization project explores listings data for New York City on Airbnb, a platform for finding places to stay around the world.
</p>

<p>I chose to focus on New York City for this project for a few reasons. I live there, so I have a personal interest. It is also the largest 
    city in the United States and a huge tourist destination, so while it would narrow the scope of the data it would also leave me with a large
    amount to analyze.
</p>

<div id="datacontainer"></div>

<div id="neighborhoods"></div>

<h1 id="neighborhoods_header">Data by Neighborhood</h1>

<svg id="chart1" width="1500" height="400"></svg>

<p>
    Placeholder text for neighborhood breakdown
</p>

<br><br><br><br><br>

<script>

async function init() {

    const data = await d3.csv('listings.csv');

    // Filter data by borough
    const manhattanData = data.filter(row => 
        row.neighbourhood_group == "Manhattan");
    const brooklynData = data.filter(row => 
        row.neighbourhood_group == "Brooklyn");
    const queensData = data.filter(row => 
        row.neighbourhood_group == "Queens");
    const bronxData = data.filter(row => 
        row.neighbourhood_group == "Bronx");
    const siData = data.filter(row => 
        row.neighbourhood_group == "Staten Island");

    console.log(manhattanData.length);
    console.log(brooklynData.length);
    console.log(queensData.length);
    console.log(bronxData.length);
    console.log(siData.length);


    // Universal chart dimensions
    const svgWidth = 1500;
    const svgHeight = 400;
    const margin = { top: 50, right: 50, bottom: 50, left: 50 };
    const chartWidth = svgWidth - margin.left - margin.right;
    const chartHeight = svgHeight - margin.top - margin.bottom;


    // Chart 1: Listings by Borough
    const svg1 = d3.select('#chart1')
        .attr("width", svgWidth)
        .attr("height", svgHeight);

    const xScale1 = d3.scaleBand()
        .domain(data.map(d => d.neighbourhood_group))
        .range([margin.left, chartWidth + margin.left])
        .padding(0.1);

    const yScale1 = d3.scaleLinear()
    .domain([0, d3.max(data, d => d['number_of_reviews'])])
    .range([chartHeight, 0]);

    const xAxis1 = d3.axisBottom(xScale1);
    const yAxis1 = d3.axisLeft(yScale1);

    svg1.append("g")
        .attr("transform", "translate(0, 350)")
        .call(xAxis1);

    svg1.append("g")
        .attr("transform", "translate(50, 0)")
        .call(yAxis1);

    svg1.selectAll(".group")
        .data(data)
        .enter()
        .append("g")
        .attr("class", "group")
        .attr("transform", d => `translate(${xScale1(d.neighbourhood_group)}, 0)`)
        .selectAll(".bar")
        .data(d => [d['number_of_reviews']])
        .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("x", (d, i) => i * (xScale1.bandwidth() / 2))
        .attr("y", d => yScale1(d))
        .attr("width", xScale1.bandwidth() / 2)
        .attr("height", d => chartHeight + margin.top - yScale1(d))
        .attr("fill", (d, i) => ["steelblue", "orange"][i]);






    

}

</script>

</body>

</html>
